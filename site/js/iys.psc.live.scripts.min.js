/*!
 * Organization: MINISTERIOS INTEGRIDAD & SABIDURIA
 * Theme: Conferencia Por Su Causa
 * Version: 1.0.0
 * UI/UX Designer and Developer: WILVIN JIMENEZ
 * Last Updated: 23-05-2016
*/
"use strict";var common=function(window,document){var commonObj={};return commonObj.getTimestamp=function(){var currentdate=new Date,timestamp=currentdate.getDate()+""+(currentdate.getMonth()+1)+currentdate.getFullYear()+currentdate.getHours()+currentdate.getMinutes()+currentdate.getSeconds();return timestamp},commonObj.getContextProtocol=function(){var protocol=/^http:/.test(document.location)?"http":"https";return protocol},commonObj.loadScript=function(id,url){var s="script",js=document.createElement(s),bfjs=document.body.getElementsByTagName(s)[0],src=url;js.id=id,js.src=src,bfjs.parentNode.insertBefore(js,bfjs)},commonObj.shuffle=function(array){for(var temp,i=array.length,j=0;i--;)j=Math.floor(Math.random()*(i+1)),temp=array[i],array[i]=array[j],array[j]=temp;return array},commonObj.setCookie=function(cName,cValue,exDate){var expiryDate="expires="+new Date(exDate).toUTCString();document.cookie=cName+"="+cValue+"; "+expiryDate+"; path=/"},commonObj.getCookie=function(cName){for(var name=cName+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},commonObj.deleteCookie=function(cName){this.setCookie(cName,"",-1)},commonObj.probablyIsMobile=function(){var viewportWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0),isACommonMobileOS=!!window.navigator.userAgent.match(/iPhone|iPad|iPod|Android|webOS|BlackBerry|Windows Phone/i);return!!(1280>=viewportWidth&&isACommonMobileOS)},commonObj}(window,document),donationsModule=function(window,document){var $donationsForm,$amountsBtns,$donationAmount,$donationAmountValue,$donateBtn,$formAlert,donationsModuleObj={};return donationsModuleObj.initialize=function(){$donationsForm=$("#donations-form"),$amountsBtns=$donationsForm.find(".amount-btn"),$donationAmount=$("#donation-amount"),$donationAmountValue=$("#donation-amount-value"),$donateBtn=$("#donate-btn"),$formAlert=$("#donations-form-alert"),$amountsBtns.on("click",function(e){e.preventDefault();var $btn=$(this);$formAlert.hide(),$amountsBtns.removeClass("selected"),!$btn.find($donationAmount).length>0&&$donationAmount.val(null),$donationAmountValue.val(parseInt($btn.text().split("$")[1].trim())),$btn.addClass("selected")}),$donationAmount.on("keydown",function(e){e=e?e:window.event;var charCode=e.which?e.which:e.keyCode,$input=$(this);return 69===charCode||187===charCode||189===charCode||190===charCode||$input.val().length>=7&&!(charCode>36&&41>charCode||8===charCode||9===charCode||18===charCode||46===charCode)?!1:void $donationAmountValue.val($input.val())}).on("keyup",function(e){var $input=$(this);$donationAmountValue.val(parseInt($input.val()))}).on("blur",function(){var $input=$(this);$input.val()||$input.closest(".amount-btn").removeClass("selected")}),$donateBtn.on("click",function(){return parseInt($donationAmountValue.val())?void $formAlert.fadeOut():($donationAmount.val(null),$donationAmountValue.val(null),$formAlert.fadeIn(),!1)})},donationsModuleObj}(window,document),adsModule=function(window,document){function loadRandomAds(randomAds){var activeAds=getActiveAds(randomAds.adsList),$ad=$randomAds.find(".ad"),loopTime=7;$(window).resize(function(){$randomAds.height($ad.height())}),$randomAds.find("img").load(function(){$(window).resize()}),common.shuffle(activeAds),$.each(activeAds,function(index,data){var $rAd=index?$ad.clone():$ad;setAdAttributes($rAd.find("a"),randomAds.linkTitle,data),$rAd.appendTo($randomAds)});setInterval(function(){var $firstAd=$randomAds.find(".ad").first();$firstAd.hide().remove(),$randomAds.append($firstAd),$firstAd.fadeIn(1e3)},1e3*loopTime)}function loadStaticAds(staticAds){var staticAdsQuantity=8,activeAds=getActiveAds(staticAds.adsList),firstSelectedAds=activeAds.slice(0,staticAdsQuantity);common.shuffle(firstSelectedAds),$.each(firstSelectedAds,function(index,data){if(staticAdsQuantity>index){var $sAd=$("#static-ad-0"+(1+index));setAdAttributes($sAd,staticAds.linkTitle,data)}})}function getActiveAds(ads){for(var activeAds=[],k=0;k<ads.length;k++){var ad=ads[k];ad.active&&activeAds.push(ad)}return activeAds}function setAdAttributes($adLink,linkTitle,data){$adLink.attr({title:linkTitle,href:data.url,target:data.target}).find("img").attr({alt:data.description,src:adsImageRootPath+data.image})}var randomAds,staticAds,adsImageRootPath,$randomAds,adsModuleObj={};return adsModuleObj.initialize=function(){var url="js/iys.psc.live.ads.definition.min.js?"+common.getTimestamp(),scriptId="iys-psc-ads-definition";common.loadScript(scriptId,url)},adsModuleObj.initializeAds=function(){randomAds=this.adsDefinitionList.randomAds,staticAds=this.adsDefinitionList.staticAds,adsImageRootPath="img/ads/",$randomAds=$("#random-ads"),loadRandomAds(randomAds),loadStaticAds(staticAds)},adsModuleObj}(window,document),videoPlayerModule=function(window,document){function setThumbnailVideoPreviewImage(){var previewImageUrl="url(img/player-live-preview-image.jpg?"+common.getTimestamp()+")";$videoThumbnail.css("background-image",previewImageUrl)}function loadPlayer(){loadPlayerApi(),window.onYouTubeIframeAPIReady=function(){player=new YT.Player("yt-video",{videoId:$("#video-id").val(),playerVars:{enablejsapi:1,rel:0,hl:"es",modestbranding:1,origin:document.domain},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange,onError:onPlayerError}})},showPlayerAlert("Espere un momento por favor."),$videoContainer.find(".video-player-watch-control").fadeOut(400)}function loadPlayerApi(){var url="https://www.youtube.com/iframe_api",scriptId="yt-wjs";common.loadScript(scriptId,url)}function onPlayerReady(event){hidePlayerAlert(),probablyIsMobile?$videoThumbnail.fadeOut():event.target.playVideo()}function onPlayerStateChange(event){playerState=event.data;var $theaterModeOverlay=$main.find(".theater-mode-overlay");switch(playerState){case YT.PlayerState.ENDED:$theaterModeOverlay.fadeOut();break;case YT.PlayerState.PLAYING:$theaterModeOverlay.fadeIn();break;case YT.PlayerState.PAUSED:$theaterModeOverlay.fadeOut();break;case YT.PlayerState.BUFFERING:$videoThumbnail.fadeOut()}}function onPlayerError(event){showPlayerAlert("Ha ocurrido un error cargando la transmisi&oacute;n en vivo. Favor intente m&aacute;s tarde. (Error: "+event.data+")")}function showPlayerAlert(htmlMessage){$playerAlert.fadeIn(400,function(){$(this).html(htmlMessage)})}function hidePlayerAlert(){$playerAlert.fadeOut(400,function(){$(this).html(null)})}var $main,$videoContainer,$videoThumbnail,$playerAlert,player,playerState,probablyIsMobile,videoPlayerModuleObj={};return videoPlayerModuleObj.initialize=function(){probablyIsMobile=common.probablyIsMobile(),$main=$("#main"),$videoContainer=$("#video-container"),$videoThumbnail=$videoContainer.find(".video-thumbnail"),$playerAlert=$("#player-alert-message"),setThumbnailVideoPreviewImage(),$videoThumbnail.on("mouseenter mouseleave",function(){$(this).toggleClass("active")}),$("#video-play-btn").on("click",function(e){e.preventDefault(),loadPlayer()})},videoPlayerModuleObj}(window,document),socialModule=function(window,document){function loadTwWidget(){loadTwitterApi(),twttr.ready(function(twttr){twttr.events.bind("rendered",function(e){var $twWidget=$("#tw-widget");applyWidgetStyles($twWidget),$twWidget.css("opacity",0).slideDown(300,function(){$(this).fadeTo(200,1)})})})}function loadTwitterApi(){window.twttr=function(s,id){var js,bfjs=document.body.getElementsByTagName(s)[0],t=window.twttr||{},url="https://platform.twitter.com/widgets.js";return document.getElementById(id)?t:(js=document.createElement(s),js.id=id,js.src=url,bfjs.parentNode.insertBefore(js,bfjs),t._e=[],t.ready=function(f){t._e.push(f)},t)}("script","twitter-wjs")}function applyWidgetStyles($twWidget){var $twTimeLine=$twWidget.find(".twitter-timeline"),$twTimeLineContents=$twTimeLine.contents(),fonts='<link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,400italic,300italic">',css='<style> .SandboxRoot { font-family: "Open Sans", arial, sans-serif; font-weight: 400; line-height: 1.42857143; color: #777; } .timeline-Header-title, .timeline-Tweet-text { font-weight: 400 !important; } .Avatar { border-radius: 50%; } </style>';$twTimeLineContents.find("head").append(fonts).append(css)}var socialModuleObj={};return socialModuleObj.initialize=function(){loadTwWidget()},socialModuleObj}(window,document),subscriptionsModule=function(window,document){function validateRequiredFields(fields){$.each(fields,function(i,v){""===this.val()&&(signUpFormIsValid=!1,this.closest(".form-group").addClass("has-error"))})}function validateEmailField(fields){$.each(fields,function(i,v){var regEx=/^(([\w\.\-_]+)?\w+@[\w-_]+(\.\w+){1,})?$/;regEx.test(this.val())||(signUpFormIsValid=!1,this.closest(".form-group").addClass("has-error"))})}function validateTextField(fields){$.each(fields,function(i,v){var fieldValue=this.val();$.isNumeric(fieldValue)&&""!==fieldValue&&(signUpFormIsValid=!1,this.closest(".form-group").addClass("has-error"))})}function validateNumericField(fields){$.each(fields,function(i,v){var fieldValue=this.val();$.isNumeric(fieldValue)&&""!==fieldValue&&(signUpFormIsValid=!1,this.closest(".form-group").addClass("has-error"))})}var $subscriptionModal,$firstName,$lastName,$emailAddress,$churchName,$countryName,$broadcastPeopleAmount,$newsletterYes,$newsletterNo,signUpFormIsValid,$formErrorMessage,subscriptionsModuleObj={};return subscriptionsModuleObj.initialize=function(){signUpFormIsValid=!0,$subscriptionModal=$("#subscription-modal"),$firstName=$("#first-name"),$lastName=$("#last-name"),$emailAddress=$("#email-address"),$churchName=$("#church-name"),$countryName=$("#country-name"),$broadcastPeopleAmount=$("#broadcast-people-amount"),$newsletterYes=$("#newsletter-yes"),$newsletterNo=$("#newsletter-no"),$formErrorMessage=$("#subscriptions-form-alert"),$subscriptionModal.on("show.bs.modal hidden.bs.modal",function(e){$(document.body).toggleClass("solid-blank")}),$subscriptionModal.modal({show:!0,backdrop:"static",keyboard:!1}),$("#btn-subscribe-later").on("click",function(e){e.preventDefault(),$subscriptionModal.modal("hide")}),$("#sign-up-form").on("submit",function(){var requiredFields=[$firstName,$lastName,$emailAddress,$countryName,$broadcastPeopleAmount],textFields=[$firstName,$lastName,$churchName],numericFields=[$broadcastPeopleAmount],emailFields=[$emailAddress];return validateRequiredFields(requiredFields),validateTextField(textFields),validateNumericField(numericFields),validateEmailField(emailFields),signUpFormIsValid||$formErrorMessage.fadeIn(),signUpFormIsValid});var expiryDate=new Date;expiryDate.setTime(expiryDate.getTime()+864e5),expiryDate.setHours(9),expiryDate.setMinutes(0),expiryDate.setSeconds(0);expiryDate.toUTCString();expiryDate.setHours(expiryDate.getHours()+1)},subscriptionsModuleObj}(window,document);!function(){$(document).ready(function(){subscriptionsModule.initialize(),videoPlayerModule.initialize(),socialModule.initialize(),adsModule.initialize(),donationsModule.initialize()})}();